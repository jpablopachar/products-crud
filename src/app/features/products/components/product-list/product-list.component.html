<div class="product-list">
    <div class="table-container">
        <table class="products-table">
            <thead>
                <tr>
                    <th>Logo</th>
                    <th>Nombre del producto</th>
                    <th>
                        Descripción
                        <svg
                            class="info-icon"
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                        >
                            <circle
                                cx="12"
                                cy="12"
                                r="10"
                                stroke="currentColor"
                                stroke-width="2"
                            />
                            <path
                                d="M12 16v-4"
                                stroke="currentColor"
                                stroke-width="2"
                            />
                            <path
                                d="M12 8h.01"
                                stroke="currentColor"
                                stroke-width="2"
                            />
                        </svg>
                    </th>
                    <th>
                        Fecha de liberación
                        <svg
                            class="info-icon"
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                        >
                            <circle
                                cx="12"
                                cy="12"
                                r="10"
                                stroke="currentColor"
                                stroke-width="2"
                            />
                            <path
                                d="M12 16v-4"
                                stroke="currentColor"
                                stroke-width="2"
                            />
                            <path
                                d="M12 8h.01"
                                stroke="currentColor"
                                stroke-width="2"
                            />
                        </svg>
                    </th>
                    <th>
                        Fecha de reestructuración
                        <svg
                            class="info-icon"
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                        >
                            <circle
                                cx="12"
                                cy="12"
                                r="10"
                                stroke="currentColor"
                                stroke-width="2"
                            />
                            <path
                                d="M12 16v-4"
                                stroke="currentColor"
                                stroke-width="2"
                            />
                            <path
                                d="M12 8h.01"
                                stroke="currentColor"
                                stroke-width="2"
                            />
                        </svg>
                    </th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr
                    *ngFor="
                        let product of paginatedProducts;
                        trackBy: trackByProductId
                    "
                >
                    <td>
                        <div class="logo-container">
                            <img
                                [src]="product.logo"
                                [alt]="product.name"
                                class="product-logo"
                                (error)="onImageError($event)"
                            />
                        </div>
                    </td>
                    <td>{{ product.name }}</td>
                    <td>{{ product.description }}</td>
                    <td>{{ formatDate(product.date_release) }}</td>
                    <td>{{ formatDate(product.date_revision) }}</td>
                    <td>
                        <div
                            class="actions-dropdown"
                            [class.open]="openDropdownId === product.id"
                        >
                            <button
                                class="dropdown-trigger"
                                (click)="toggleDropdown(product.id, $event)"
                            >
                                <svg
                                    width="16"
                                    height="16"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                >
                                    <circle
                                        cx="12"
                                        cy="12"
                                        r="1"
                                        fill="currentColor"
                                    />
                                    <circle
                                        cx="12"
                                        cy="5"
                                        r="1"
                                        fill="currentColor"
                                    />
                                    <circle
                                        cx="12"
                                        cy="19"
                                        r="1"
                                        fill="currentColor"
                                    />
                                </svg>
                            </button>
                            <div
                                class="dropdown-menu"
                                *ngIf="openDropdownId === product.id"
                            >
                                <button
                                    class="dropdown-item"
                                    (click)="onEdit(product)"
                                >
                                    Editar
                                </button>
                                <button
                                    class="dropdown-item delete"
                                    (click)="onDelete(product)"
                                >
                                    Eliminar
                                </button>
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="table-footer">
        <div class="results-info">{{ totalResults }} Resultados</div>
        <div class="pagination-controls">
            <select
                [(ngModel)]="itemsPerPage"
                (change)="onItemsPerPageChange()"
                class="items-per-page-select"
            >
                <option value="5">5</option>
                <option value="10">10</option>
                <option value="20">20</option>
            </select>
        </div>
    </div>
</div>
